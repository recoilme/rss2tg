package rss2tg

import (
	"fmt"
	"testing"

	"github.com/stretchr/testify/assert"
)

func Test_RssList(t *testing.T) {
	lines, err := RssList("../rss.txt")

	assert.NoError(t, err)
	assert.Equal(t, true, len(lines) >= 10)
}

func Test_FeedItems(t *testing.T) {
	lines, err := RssList("../rss.txt")

	assert.NoError(t, err)
	words, err := WordsList("../words.txt")
	assert.NoError(t, err)

	assert.Equal(t, true, len(lines) >= 10)
	FeedItems(lines[0], words)
}

func Test_WordsList(t *testing.T) {
	words, err := WordsList("../words.txt")

	assert.NoError(t, err)
	//fmt.Printf("%+v",lines)
	assert.Equal(t, true, len(words) >= 10)
}

func Test_SumAI(t *testing.T) {
	tt :=
		` Samsung Galaxy S23 Ultra review   Return of the kitchen sink phone  Brian Heater  @bheater  / 21 hours    Samsung is the best at big. Big, brash, bold, kitchen sink phones. The company that mainstreamed the phablet a dozen years ago has never given up on big dreams about big phones. Last year, the company took a risk — sunsetting the beloved Note line. While I stand by my initial assessment that the Samsung Galaxy S22  Note would have served as a good branding compromise, the justification behind the move made sense.   For one thing, there was little daylight left between the Galaxy S and Note lines. From a design standpoint, the two had become increasingly difficult to distinguish. The idea of a big phone is more normal than novel these days, and the addition of S Pen functionality to the former was the last straw. There’s also the simple fact that people just aren’t buying phones like they used to, so combining two similar premium lines was a logical move.   All of this allowed Samsung to put its money where its mouth was, with regard to foldables. I’ll admit I had my doubts when the company declared the Galaxy Z Fold a flagship. Promoting it to the top spot by vacating a Note-sized hole in its lineup laid those questions to rest — even if the jury is still out on long-term viability. Analysts put Samsung’s to-date foldable shipments at ~10 million units in the middle of last year. That’s nothing to shake a stick at, and a clear advantage of still more or less being the only game in foldable town.   While Samsung is far from the phone maker in the premium space, the company — along with Apple — continues to dominate the sales charts. Huawei is out of the picture for the time being, and while a slew of fellow Chinese companies have happily filled in that particular void, Samsung continues to be the premium Android smartphone to beat.       Image Credits:  Brian Heater     The Galaxy S23 Ultra  is, for all intents and purposes, the Galaxy Note 23. It’s more than just a spiritual successor, it’s the product that device almost certainly would have become. And while it’s not the most expensive handset in Samsung’s portfolio (the Z Fold wins that context in a landslide), it’s arguably the most premium device the company offers. Certainly a $1,200 starting price qualifies as prohibitively expensive for most consumers.   The good news is by swapping some topline features, you can bring the starting price down to $800 for the S23, which qualifies as a reasonable price for a flagship from one of the two big phone makers these days. Per usual, the sacrifices for the entry-level model are screen size, battery (directly tied to screen/phone size), camera and stylus functionality. The 6.1-inch handset is still very much a flagship, and certainly not everyone needs a 200-megapixel camera sensor or what’s a 6.8-inch phone.   The $1,000 Galaxy S23+ splits the difference to a certain extent. The 6.6-inch display and 4,700mAh battery are closer to what you get with the S23 Ultra. Once again, the 200-megapixel main camera is demoted to 50 megapixels and stylus functionality is dropped altogether. If you can live without those pieces — as presumably the vast majority of Samsung flagship buyers can — it’s not an especially compelling upgrade, priced $100 more than the entry-level iPhone 14 Pro.       Image Credits:  Brian Heater     One of the biggest downsides to the Galaxy S line’s absorption of the Note is there’s not a whole lot of wiggle room for enthusiasts of the latter. There’s no, say, Note Lite in the mix. That’s likely due, in part, to the fact that phones with stylus functionality remain relatively niche, in spite of the Note’s success. From a pure numbers standpoint, it makes sense to keep the product around, but perhaps not to build an entire line around it.   That means if you want the feature, you need all of the other bells and whistles that come with it. Samsung has offered bespoke colors across product lines for a while, but when it comes to the mass production of consumer electronics, bespoke features are another thing entirely. It’s difficult to make the case that anyone “needs” either of these features, but a wide swath of premium Samsung device owners have found S Pen-based note taking extremely useful for their work life, and you can’t really argue with that.   Notably, all three models sport the same Snapdragon 8 Gen 2 processor. Qualcomm’s latest flagship brings a lot to the table, with regards to upgrades. That starts with oft-overlooked elements like faster Wi-Fi courtesy of an upgraded radio and Wi-Fi 7. The latter, mind, is a slight bit of future-proofing, with the first compatible routers rolling out this year. In the meantime, you can take advantage of Wi-Fi 6 and 6E speeds, network dependent.   As ever, processing power gains are the real headliner. Our S23 Ultra (with 12GB of RAM and 512GB of storage) scored 1434 on the Geekbench 5 single core and 4787 multicore, which present a healthy leap over the previous generation, though the overall scores lag behind what Apple is currently able to get with first-party silicon on the iPhone. The entire phone experience is a smooth one. Years of hardware and software evolution have led to a well polished product that is both quick and responsive, flipping between apps, playing games and watching videos.       Image Credits:  Brian Heater     The phone’s design has swung in a boxier direction this year, away from the smooth, rounded corners of its predecessors. That’s something of a mixed blessing. Maybe it’s just me, but the push toward perfectly smooth devices is aesthetically pleasing, but they are — quite literally — harder to hold onto. On the other hand, there’s a degree to which it feels as if Samsung is leaning into the tank metaphor on it high-end device, and those who already have issues holding a 6.8-inch phone in one hand might have added difficulty here. It’s an intentional contrast to the rounded S23 and S23+, adopting a more industrial and — perhaps business-focused — design.   The S23 line is the first of any manufacture to sport Gorilla Glass Victus 2, which was announced at the tail end of last year. That’s some consolation for not being the first with the new Qualcomm chipset — though as with that, you’re likely to see several (or dozens) of systems with Corning’s latest. And why not? Ruggedness has to be among the top three or five most requested features among phone buyers. Flagships were once among both the most expensive and most fragile handsets you could buy.   Along with improved scratch resistance, the material is rated as being able to withstand a one-meter drop onto concrete and two meters onto asphalt. Hopefully you’ll never have to test that with your $1,200 handset, but hell, most of us have been there at some point or another. Before leaving the topic of material, it’s important to highlight Samsung’s ongoing sustainability efforts. If I was feeling a bit more cynical, I would say that the best way to reduce e-waste is to get consumers off the every-two-to-three-year upgrade cycle, but we both know that’s not how these things work for companies perpetually looking for new ways to move more volume.       Image Credits:  Brian Heater     And besides, marketing interests aside, companies should absolutely be encouraged to repurpose materials where possible. Much of Samsung’s efforts on that front have been centered on making materials from old fishing nets, water barrels and plastic bottles. All told, the phone is made up of around 22% recycled materials, per the company’s figures. Samsung also dropped much of the excess packing materials for shipping a few generations back.   The camera layout on the rear is intact. At top is the 12-megapixel ultrawide camera with autofocus, the 200-megapixel wide camera is in the middle and the 10-megapixel telephoto takes the bottom spot. Another 10-megapixel lens with Space Zoom (3x, 10x optical) is positioned to the left of the 200-megapixel one.   As ever, the camera’s the thing here. For years, it’s been the major battleground on which the flagship wars have been fought. Samsung has largely been up against Apple on that front, though tough competition has arisen from the likes of Xiaomi and other Chinese firms in Huawei’s absence. Despite its absence of market share, Google has also become a formidable challenger  , through its masterful combination of hardware and AI-driven computational photography.   The 200-megapixel sensor is the headline — literally and figuratively. Interestingly as these things go, it seems the S23 Ultra isn’t the first phone on the market to sport the super-high megapixel sensor. That honor appears to belong to the extremely reasonably priced Xiaomi 12T Pro. Samsung has long been among the biggest component suppliers for other companies’ phones, so that isn’t a huge surprise.   [gallery ids="2481330,2481338,2481337,2481336,2481335,2481333,2481332,2481331"]   Anyone who follows this stuff at all will quickly point out that megapixels aren’t everything. That’s true, of course, but the evolution of mobile cameras have made increasingly good use of all those pixels. That means utilizing binning to combine information from multiple pixels to create a kind of larger superpixel capable of gathering a lot more light for sharper images with less noise.   The camera array is truly excellent. The 200-megapixel sensor doesn’t feel necessary in most settings, but it has its moments. A majority of users aren’t going to have much need to shoot huge files at full resolution. If you do want to get the full pro photos, the phone is capable of shooting in RAW, which can be edited with Adobe Lightroom by default.   For your average user, the hardware/software combo works quite well out of the box. The Ultra performs well in low light, and the optical zoom is a life saver. It can do up to 100x, but I mostly topped out around 10x, so as to not degrade the image. Overall, however, it’s one of the best zoom — and overall camera — experiences available on a handset in 2023.       Image Credits:  Brian Heater     As ever, the screen is gorgeous. The 6.8-inch AMOLED display sports a 3,088×1,440 resolution, to the S23 and S23+’s 2,340 x1,080. All three have an adjustable 120Hz refresh rate. The Ultra also peaks out at an extremely bright 1,750 nits. The phone’s largest size means more room for battery. At 5,00mAh, it got me through more than a day of heavy use. The 45W wired charging will top that up quickly when you’re low.   The Galaxy S23 Ultra is, predictably, a great phone. It’s a true no-compromise Android handset, from the big, bright screen and the generous battery to the diverse camera array and S Pen functionality. It’s an extremely pricey device that’s the true definition of getting what you pay for. 
	`
	sum, err := OpenAISum("", tt)
	assert.NoError(t, err)
	fmt.Printf("%+v", sum)
}
